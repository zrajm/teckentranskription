-*- org -*-

* General
** TODO Minify SVG
   https://jakearchibald.github.io/svgomg/
** TODO Homogenize CSS for all pages
   All pages should use one base CSS + an extra CSS with the styles needed for
   these pages, and preferably there should be no extra per-file CSS.
* Lexicon
** [0/12] Query syntax
*** TODO Help section for query syntax
    * = match 'word' characters (i.e. not space and segment separator, '􌥠', but
      everything else)

    Useful (complex) query:
    􌥧 􌦆􌥃 -􌥠 -#:#: -:##: -􌦆*􌦆  -@

    Transcriptions are fiddly and finicky, rather than spending time on
    inputting a transcription, search for a sign that you know is similar to
    the one you're looking for, then copy/paste the transcription of that sign
    into the search field and replace parts you're not sure about with
    asterisks ('*').

    If you get too many matches, the following search terms can be useful for
    ignoring some of them:

      -:##: -- exclude signs with two active hands
      -#:#: -- exclude signs with one active, one passive hand
      -@    -- exclude signs a body position
      -􌥠    -- exclude signs with more than one segment
      -􌥠*􌥠  -- exclude signs with more than two segments
      :##:  -- include only signs with two active hands
      #:#:  -- include only signs with one active, one passive hand
      @     -- include only signs which have a body position

    Display signs that contain a downward motion, and a handshape transition to
    the spread hand (sprethanden), but that does not contain multiple segments
    (-􌥠), two handed segments (excluding those with a passive secondary hand
    with -#:#:, and those with an active secondary hand with -:##:), more than
    one handshape transition, or a specified position (-@).
*** TODO Specify match is to be all in one segment
    Add a prefix to specify that a match should be all within the same segment.
    (Maybe 'x:'?)

    This would mean that a query like '*􌤶##:' cannot match across segment
    borders.

    In practice this means that in fields with this prefix, an asterisk ('*')
    should match '[^/]*' (where '/' is the segment separator) instead of '.*'.
*** TODO New search query syntax (require '*' for partial words)
    There should also be a help section for the new special characters, and if a
    search resulted in zero matches, something helpful should be displayed to
    the user.
*** TODO Don't use '#' for special stuff in search queries
    It is used in the transcriptions to indicate finger spelled words.
*** TODO Character class for 'förs'
    All arrows, not including 'contact'.
*** TODO Character class for 'circle'
    Old + new circle symbols
*** TODO Character class for 'face'
    Combination of upper and lower face.
*** TODO Character class for 'upper face'
    Upper/whole face + upper & central facial features (crown, forhead, eye) etc.
*** TODO Character class for 'lower face'
    Lower/whole face + lower & central facial features (cheek, chin, mouth) etc.
*** TODO Character class for 'hand-external type of motion'
    Curving, (all types of) circling, hitting and turning.
*** TODO Character classes [...] to search query
    Useful when one is searching for one of multiple hand shapes.
*** TODO Way to match end of words in search queries
    ^..$ (?), or use '*' to denote non-end of words?
** [0/2] Search result
*** TODO Updating of search result should be interruptable
    When search result is being updated, performing a new search should abort
    the updating of the previous result. One should also be able to abort the
    updating (e.g. by pressing Esc).
*** TODO Sortable search results
    Present search result in a sortable table? Should be able to sort by swedish
    word, and by sign language.
** [0/2] Transcripts
*** TODO Missing slash in transcription between segments 1 & 2
    E.g. in #􌤵􌥗􌤩􌤩􌤵􌤶􌥣􌥱􌦋􌦇􌥻􌥠#

*** TODO Separator-at-end bug
    http://localhost/teckentranskription/lexicon.html#@*%F4%8C%A5%A0
    Actually, last segment should be '#' in these words. Fix the data generator
    script!
** [0/7] GUI
*** TODO Make Javascript generated CSS neater
    Instead of using jQuery to apply CSS in 'style' attribute, should generate
    random ID for a prefix, and use CSS rules.
*** TODO Newlines->space when pasting into search query <textarea>
*** TODO Add search query help info
    In a dropdown of some kind?
**** TODO Automatically display search query help
     Before a search is performed, and when a search results in no matches.
*** TODO Chrome should autodetect lexicon as 'search engine'
    https://martin-thoma.com/search-engine-autodiscovery/#google-chrome-autodiscovery
*** TODO Page load progress bar should fit in style
    Dark turquoise + it should be displayed under the search bar (or if the
    search bar is retracted, at the top of the page)
*** TODO Make virtual keyboard come sliding out from under the search form
    The on-screen keyboard should be displayed on top of search results, so
    that dropping the keyboard does not scroll the search results.
*** TODO Make search form drop down on top of search result
    When scrolling down over the search results, the search form should slide
    upwards, and reveal a button which can be pressed to drop down the search
    form on top of the results.
** TODO Use ECMAScript6 or not?
   Currently using /u regex flag, which turns out to be ES6. This program
   probably won't work without it, and thus it might be better to go all the
   way and use `let` and `const` and all the other good stuff from ES6.

   Which browsers support ES6?

   Need to test (get some statistics on what browser ppl have):

   Compatibility data is from here: http://kangax.github.io/compat-table/es6/

   + ES5 standard released in 2009.
   + ES6 standard released in 2015.

   |-----------------+---------------------|
   | Browser         | /u support          |
   |-----------------+--------+------------|
   | Firefox         | >=v50? | 2016-06-06 |
   | EdgeHTML        | >=v12  | 2016-08-02 |
   | Safari          | >=v10  | 2016-09-20 |
   | Chrome/Chromium | >=v54? | 2016-10-12 |
   | Explorer        | -      | -          |
   |-----------------+--------+------------|

   If we need to go ES5, then splitting of the query string can be done with
   code found here: https://stackoverflow.com/a/38901550/351162
** TODO Display search result in subquery order
   Returned result should have one list per subquery (and in the same order as
   the subqueries), and the result should be displayed in that order.
** TODO Sortable search result
   Search result should be sortable in by:

   + Subquery order
   + ID number
   + Sign language transcription (sort order?)
   + Swedish

   Default should be: subquery + sign language.
** TODO Lexicon/search part should be standalone module
** TODO Hover over button should display handshape etc.
** TODO Memory optimization
   Leakyness? -- Does a new search completely (or as completely as possible)
   clear the memory before building up a new search result?

   Is the search result list of an okay size? (Was it smaller with
   the old array, instead of object, approach?)
** TODO Repeated search should not reload search result
** TODO Add CC license text + note data source
* Transcription Intro Article
** TODO Update terminology
   Weak/strong should be replaced by ipsilateral/contralateral (ipsi/contra).
** [0/2] Table filtering
*** TODO Number of entries shown should be displayed at top of table
    So that you can easily see e.g. how many handshapes occurred in a specific
    source.
*** TODO Fix table checkboxes
   One should be able to use the table checkboxes for selecting what to display
   in any given table.

   These should work so that, when checked, all items with that attribute are
   displayed (but no other).

   If multiple checkboxes are marked, they should be AND:ed together.
** TODO Reference section should which sources are derivatives of other

   There should be comments describing that the following works are basically
   variations on *the exact the same text*, with only some minor updates. (This
   is especially important almost all of the example transcriptions given are
   retained, even though many of them are no longer to be found in the
   lexicon.)

     + Teckenspråkstranskription (1982)
     + Kompendium i teckentranskription (1993)
     + Teckentranskription (2015)
** TODO All mentions of a reference should link to relevant reference section
** TODO Standardize citing of sources
   Everywhere where a source is quoted, it should be done using a <details>
   tag, with name + page of source in the <summary>. E.g.:

     <details closed>
       <summary>[<a href="#ref1977">Tecknad svenska</a>]</summary>

       <p>.....
   </details>
** TODO Add symbol descriptions from "Kompendium in teckenspråkstranskription"
   Symbols for "lilla A-handen" etc. that occur in this source should be
   included in the article.
** TODO Include transcription of words especially interesting words
   'camera' makes use of passive + active hand + body position. That this can
   occur (and how) should be described in the transcription rules somehow.
   http://teckensprakslexikon.su.se/ord/03672

   'setback' (få tji/få bakslag) is singed in an odd way, and the passive hand
   sort of has a body position, but the sign isn't transcribed that way in the
   lexicon: http://teckensprakslexikon.su.se/ord/00497 -- Is there even a way
   to understand the sign from the current transcription in the lexicon?
** TODO Prettier positioning of the hand images in the handshape table
   The handshape images in the table of handshapes should not be in separate
   <td>, but should instead be floated left, so that the description text of
   the handshape in question can fill out the entire width of the column (right
   now the text column becomes very narrow when there are multiple hand shapes
   show on the right hand side of the text).
** TODO Source citations (<details>) should be more clearly delineated
   Currently is kinda hard to see difference between an expanded source
   citation and the surrounding text, maybe put a border or something around
   it?
** TODO Improve top-right expand/collapse buttons
   Instead of having two buttons, there should be only one which should (in a
   fashion similar to org-mode) cycle through the modes:

     + Everything collapsed (default)
     + All <details> without the 'closed' attribute opened
     + ALL <details> opened

   Mouseover text should clearly state what will happen upon the next click.
* Unicode typeface
** [1/6] Add latest work into font
*** TODO Increase circle symbol size
*** TODO Rotate bending articulation symbol 180°
*** TODO Add symbol for handshape llama
    Name: handshape_llama
*** TODO Add symbol for elbow pit
    Name: position_elbow_pit
*** TODO Add symbol for neutral space
    Name: position_neutral_space
*** DONE Raise articulation symbols somewhat
    CLOSED: [2018-02-11 Sun 19:01]
** [0/15] Round off coordinates in symbols
   Among others, the following symbols (excluding symbols that could be turned
   into references):
*** TODO position_forehead
*** TODO position_cheeks
*** TODO handshape_rooster
*** TODO handshape_rooster_bent
*** TODO handshape_flat_with_thumb
*** TODO interaction_type_hooking
*** TODO interaction_type_exchanging
*** TODO interaction_type_angling
*** TODO motion_type_curving
*** TODO motion_type_playing
*** TODO motion_type_waving
*** TODO motion_type_reshaping
*** TODO interaction_type_alternating
*** TODO interaction_type_entering
*** TODO motion_type_circling
** TODO Redesign 'alternating' symbol
** TODO Turn placeholder symbols into references
** TODO Correct symbols borrowed from other alphabets
   E.g. symbols 'L', 'M', 'N' etc. that are copied from latin (or other
   alphabets) should be identical to their originals. Verify and correct this
   in the .sfd file.

   (Can the TTF hints be accurately copied as well?)
** TODO Add 'neutral space' symbol + modifiers
*** TODO Modify transcription of ARGENTINA/BEATLES/ORKESTER
    These signs could all benefit from having the left hand transcribed with
    a symbol for 'to the left in the neutral space'.

    http://teckensprakslexikon.su.se/ord/10019 ARGENTINA
    http://teckensprakslexikon.su.se/ord/15318 BEATLES
    http://teckensprakslexikon.su.se/ord/08301 ORKESTER
** DONE Field III should be raised a bit
   To allow for larger simplified circles, and room for the arrows below
   circle/twist etc.
** DONE Add simplified 'circle' notation
   CLOSED: [2017-10-21 Sat 17:26]
* Transcription app
** TODO Should use same virtual keyboard code as lexicon
** TODO Run code + HTML + CSS through validator.
** TODO Add tests for Javascript code
** TODO Ease-of-use: Hovering on symbol buttons should display help info
   E.g. when hovering over an input button it should display information about
   that character in an overlay (in lower right corner?). There should an image
   of the handshape, or an animation of the finger/hand movements etc.
* Finished
** [8/8] Reimport GNU FreeSans glyphs into font
*** DONE Add unmodified GNU FreeSans + SFD file thereof
    CLOSED: [2018-02-05 Mon 08:45]
*** DONE Wipe FreeSans-SWL clean with GNU FreeSans
    CLOSED: [2018-02-05 Mon 15:27]
*** DONE Update 'sfntRevision'
    CLOSED: [2018-02-09 Fri 14:25]
*** DONE Add FreeSans-SWL global metadata
    CLOSED: [2018-02-09 Fri 14:42]
    Set font name, copyright notice etc. for freesans-swl.
*** DONE Set capital height guideline
    CLOSED: [2018-02-09 Fri 14:56]
*** DONE Add sign language symbols from previous font
    CLOSED: [2018-02-09 Fri 17:26]
*** DONE Add names to sign language symbols
    CLOSED: [2018-02-09 Fri 17:43]
*** DONE Add character lookup tables
    CLOSED: [2018-02-09 Fri 18:21]
** DONE Remove strong/weak terminology from font article
   CLOSED: [2018-02-09 Fri 18:04]
   Replace with the usual left/right (do this in Swedish too).
** DONE Add link to lexicon from other articles
   CLOSED: [2018-02-01 Thu 08:51]
*** DONE freesans-swl.html
*** DONE index.html
*** DONE intro.html
** DONE Circling/curving/hitting/twisting should allow modifier
   CLOSED: [2018-01-28 Sun 01:22]
** DONE All handshapes/places chars should allow diacritic
   CLOSED: [2018-01-28 Sun 01:20]
   I.e. each handshape (except in character classes, or in quotes) should
   allow for an optional diacritic.
** DONE Focus indicator border should be light turquoise
   CLOSED: [2018-01-21 Sun 02:07]
   Something matching the current color theme, rather than the currently blue
   focus indicator border.
** DONE Make GUI turquoise
   CLOSED: [2018-01-18 Thu 17:45]
** DONE Virtual keyboard should not rely on HTML
   CLOSED: [2018-01-08 Mon 06:40]
   All the HTML, CSS etc. should be in self-contained Javascript module.
** DONE Virtual keyboard shouldn't respond to Alt-Esc etc.
   CLOSED: [2018-01-07 Sun 12:45]
   Only plain Esc, without qualifier keys, should result in the onscreen
   keyboard being displayed.
** DONE Cleanup variable + function names
   CLOSED: [2018-01-06 Sat 22:22]
   Don't use '_' in function names.

   Replace `searchQuery` with either `queryStr` or just `query`, depending on
   whether it's a parsed object or the user-inputted query string.
** DONE Rewrite query parser
   CLOSED: [2018-01-06 Sat 22:12]
   Query parser now process user-inputted query string character by character,
   instead of parsing it with a regex. This should eliminate the possibility of
   an infinite loop in some undetected corner case.
** DONE Make the Javascript pass JSLint
   CLOSED: [2018-01-06 Sat 08:01]
   Two warnings remain as of now, but these seem quite minor & hard to fix so
   leaving them for now.

   Unexpected '\' before '1'.
       .replace(/^(["'])(.*?)\1?$/u, "$2")           // remove quotes

   Unexpected statement '=' in expression position.
      while (m = termRegex.exec("," + queryStr)) {
** DONE Add links to other articles from lexicon
   CLOSED: [2018-01-05 Fri 10:37]
** DONE Search queries: Comma as OR separator in search query
   CLOSED: [2018-01-04 Thu 17:40]
   Query should be split into OR:ed sub-queries on comma. E.g.
   'X, Y' should search for all words containing either X or Y.
** DONE Search queries: Space as AND separator in search query
   CLOSED: [2018-01-04 Thu 17:40]
   Searching for 'A<space>B' should find lexical entries with both 'A' and 'B'
   in them, regardless of order.
** DONE Scroll to top-of-page widgety thing
   CLOSED: [2018-01-02 Tue 06:06]
   Semi-transparent arrow in lower right corner should appear if scrolling
   down, if pressed it should bring user to top of page.
** DONE Progress bar during search result update
   CLOSED: [2017-12-31 Sun 11:18]
   The search is always very fast, but displaying results takes time when there
   are a lot of entries found... Is there a way to speed this up?

   NO -- I did some research/experiments with various ways of updating the DOM,
   but couldn't find any method that was significantly faster than the one
   currently used.

   Rewrote the updating so a search resulting in 500 matches will be displayed
   is the same way as before, but if there are more matches than that, then
   each additional chunk of 500 matches will be added chuck-by-chunk (with a
   progress bar at the top of the page indicating how many chunks to go).
** DONE Make lexicon search case-insensitive
   CLOSED: [2017-12-25 Mon 01:58]
   Some words in the dictionary have upper case letters in their definition,
   these upper case letters cannot be matched in a search. (Since the query is
   translated to lowercase, and only lower case is searched for.)
** DONE Lexicon: Browser history buttons should work
   CLOSED: [2017-12-12 Tue 13:30]
   Update '#<query>' part of the URL so that back/forward buttons work.
** DONE Clean up TODO file and move these TODO items into its own (org-mode) file.
   CLOSED: [2017-09-20 Wed 19:25]
** DONE Pressing <enter> should also update search
   CLOSED: [2017-12-20 Wed 18:43]
   Currently, in MSIE11, pressing <enter> does not execute search (one has to
   unfocus the input field for the search to update).
** DONE Share button should look more like YouTube's share button
   CLOSED: [2017-12-18 Mon 11:49]
* [eof]
