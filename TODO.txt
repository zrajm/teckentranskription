-*- org -*-

* General
** TODO Homogenize CSS for all pages
   All pages should use one base CSS + an extra CSS with the styles needed for
   these pages, and preferably there should be no extra per-file CSS.
* Lexicon
** [0/1] Query syntax
*** TODO New search query syntax (require '*' for partial words)
    There should also be a help section for the new special characters, and if a
    search resulted in zero matches, something helpful should be displayed to
    the user.
** [0/2] Search result
*** TODO Updating of search result should be interruptable
    When search result is being updated, performing a new search should abort
    the updating of the previous result. One should also be able to abort the
    updating (e.g. by pressing Esc).
*** TODO Sortable search results
    Present search result in a sortable table? Should be able to sort by swedish
    word, and by sign language.
** [0/2] Transcripts
*** TODO Missing slash in transcription between segments 1 & 2
    E.g. in #􌤵􌥗􌤩􌤩􌤵􌤶􌥣􌥱􌦋􌦇􌥻􌥠#

*** TODO Separator-at-end bug
    http://localhost/teckentranskription/lexicon.html#@*%F4%8C%A5%A0

    Actually, last segment should be '#' in these words. Fix the data generator
    script!
** TODO Virtual keyboard shouldn't respond to Alt-Esc etc.
   Only plain Esc, without qualifier keys, should result in the onscreen
   keyboard being displayed.
** TODO Use ECMAScript6 or not?
   Currently using /u regex flag, which turns out to be ES6. This program
   probably won't work without it, and thus it might be better to go all the
   way and use `let` and `const` and all the other good stuff from ES6.

   Which browsers support ES6?

   Need to test (get some statistics on what browser ppl have):

   Compatibility data is from here: http://kangax.github.io/compat-table/es6/

   + ES5 standard released in 2009.
   + ES6 standard released in 2015.

   |-----------------+---------------------|
   | Browser         | /u support          |
   |-----------------+--------+------------|
   | Firefox         | >=v50? | 2016-06-06 |
   | EdgeHTML        | >=v12  | 2016-08-02 |
   | Safari          | >=v10  | 2016-09-20 |
   | Chrome/Chromium | >=v54? | 2016-10-12 |
   | Explorer        | -      | -          |
   |-----------------+--------+------------|

   If we need to go ES5, then splitting of the query string can be done with
   code found here: https://stackoverflow.com/a/38901550/351162
** TODO Lexicon/search part should be standalone module
** TODO Virtual keyboard should not rely on HTML
   All the HTML, CSS etc. should be in self-contained Javascript module.
** TODO Hover over button should display handshape etc.
** TODO Strip newlines when pasting into <textarea>
** TODO Memory optimization
   Leakyness? -- Does a new search completely (or as completely as possible)
   clear the memory before building up a new search result?

   Is the search result list of an okay size? (Was it smaller with
   the old array, instead of object, approach?)
** TODO Repeated search should not reload search result
** TODO Add CC license text + note data source
** TODO Add link to lexicon from transcription article
* Transcription Intro Article
** TODO Update terminology
   Weak/strong should be replaced by ipsilateral/contralateral (ipsi/contra).
** [0/2] Table filtering
*** TODO Number of entries shown should be displayed at top of table
    So that you can easily see e.g. how many handshapes occurred in a specific
    source.
*** TODO Fix table checkboxes
   One should be able to use the table checkboxes for selecting what to display
   in any given table.

   These should work so that, when checked, all items with that attribute are
   displayed (but no other).

   If multiple checkboxes are marked, they should be AND:ed together.
** TODO Reference section should which sources are derivatives of other

   There should be comments describing that the following works are basically
   variations on *the exact the same text*, with only some minor updates. (This
   is especially important almost all of the example transcriptions given are
   retained, even though many of them are no longer to be found in the
   lexicon.)

     + Teckenspråkstranskription (1982)
     + Kompendium i teckentranskription (1993)
     + Teckentranskription (2015)
** TODO All mentions of a reference should link to relevant reference section
** TODO Standardize citing of sources
   Everywhere where a source is quoted, it should be done using a <details>
   tag, with name + page of source in the <summary>. E.g.:

     <details closed>
       <summary>[<a href="#ref1977">Tecknad svenska</a>]</summary>

       <p>.....
   </details>
** TODO Add symbol descriptions from "Kompendium in teckenspråkstranskription"
   Symbols for "lilla A-handen" etc. that occur in this source should be
   included in the article.
** TODO Include transcription of words especially interesting words
   'camera' makes use of passive + active hand + body position. That this can
   occur (and how) should be described in the transcription rules somehow.
   http://teckensprakslexikon.su.se/ord/03672

   'setback' (få tji/få bakslag) is singed in an odd way, and the passive hand
   sort of has a body position, but the sign isn't transcribed that way in the
   lexicon: http://teckensprakslexikon.su.se/ord/00497 -- Is there even a way
   to understand the sign from the current transcription in the lexicon?
** TODO Prettier positioning of the hand images in the handshape table
   The handshape images in the table of handshapes should not be in separate
   <td>, but should instead be floated left, so that the description text of
   the handshape in question can fill out the entire width of the column (right
   now the text column becomes very narrow when there are multiple hand shapes
   show on the right hand side of the text).
** TODO Source citations (<details>) should be more clearly delineated
   Currently is kinda hard to see difference between an expanded source
   citation and the surrounding text, maybe put a border or something around
   it?
** TODO Improve top-right expand/collapse buttons
   Instead of having two buttons, there should be only one which should (in a
   fashion similar to org-mode) cycle through the modes:

     + Everything collapsed (default)
     + All <details> without the 'closed' attribute opened
     + ALL <details> opened

   Mouseover text should clearly state what will happen upon the next click.
* Unicode typeface
** TODO Field III should be raised a bit
   To allow for larger simplified circles, and room for the arrows below
   circle/twist etc.
** TODO Add 'neutral space' symbol + modifiers
*** TODO Modify transcription of ARGENTINA/BEATLES/ORKESTER
    These signs could all benefit from having the left hand transcribed with
    a symbol for 'to the left in the neutral space'.

    http://teckensprakslexikon.su.se/ord/10019 ARGENTINA
    http://teckensprakslexikon.su.se/ord/15318 BEATLES
    http://teckensprakslexikon.su.se/ord/08301 ORKESTER
** DONE Add simplified 'circle' notation
   CLOSED: [2017-10-21 Sat 17:26]
* Transcription app
** TODO Run code + HTML + CSS through validator.
** TODO Add tests for Javascript code
** TODO Share button should look more like YouTube's share button
** TODO Ease-of-use: Hovering on symbol buttons should display help info
   E.g. when hovering over an input button it should display information about
   that character in an overlay (in lower right corner?). There should an image
   of the handshape, or an animation of the finger/hand movements etc.
* Finished
** DONE Cleanup variable + function names
   CLOSED: [2018-01-06 Sat 22:22]
   Don't use '_' in function names.

   Replace `searchQuery` with either `queryStr` or just `query`, depending on
   whether it's a parsed object or the user-inputted query string.
** DONE Rewrite query parser
   CLOSED: [2018-01-06 Sat 22:12]
   Query parser now process user-inputted query string character by character,
   instead of parsing it with a regex. This should eliminate the possibility of
   an infinite loop in some undetected corner case.
** DONE Make the Javascript pass JSLint
   CLOSED: [2018-01-06 Sat 08:01]
   Two warnings remain as of now, but these seem quite minor & hard to fix so
   leaving them for now.

   Unexpected '\' before '1'.
       .replace(/^(["'])(.*?)\1?$/u, "$2")           // remove quotes

   Unexpected statement '=' in expression position.
      while (m = termRegex.exec("," + queryStr)) {
** DONE Add links to other articles from lexicon
   CLOSED: [2018-01-05 Fri 10:37]
** DONE Search queries: Comma as OR separator in search query
   CLOSED: [2018-01-04 Thu 17:40]
   Query should be split into OR:ed sub-queries on comma. E.g.
   'X, Y' should search for all words containing either X or Y.
** DONE Search queries: Space as AND separator in search query
   CLOSED: [2018-01-04 Thu 17:40]
   Searching for 'A<space>B' should find lexical entries with both 'A' and 'B'
   in them, regardless of order.
** DONE Scroll to top-of-page widgety thing
   CLOSED: [2018-01-02 Tue 06:06]
   Semi-transparent arrow in lower right corner should appear if scrolling
   down, if pressed it should bring user to top of page.
** DONE Progress bar during search result update
   CLOSED: [2017-12-31 Sun 11:18]
   The search is always very fast, but displaying results takes time when there
   are a lot of entries found... Is there a way to speed this up?

   NO -- I did some research/experiments with various ways of updating the DOM,
   but couldn't find any method that was significantly faster than the one
   currently used.

   Rewrote the updating so a search resulting in 500 matches will be displayed
   is the same way as before, but if there are more matches than that, then
   each additional chunk of 500 matches will be added chuck-by-chunk (with a
   progress bar at the top of the page indicating how many chunks to go).
** DONE Make lexicon search case-insensitive
   CLOSED: [2017-12-25 Mon 01:58]
   Some words in the dictionary have upper case letters in their definition,
   these upper case letters cannot be matched in a search. (Since the query is
   translated to lowercase, and only lower case is searched for.)
** DONE Lexicon: Browser history buttons should work
   CLOSED: [2017-12-12 Tue 13:30]
   Update '#<query>' part of the URL so that back/forward buttons work.
** DONE Clean up TODO file and move these TODO items into its own (org-mode) file.
   CLOSED: [2017-09-20 Wed 19:25]
** DONE Pressing <enter> should also update search
   CLOSED: [2017-12-20 Wed 18:43]
   Currently, in MSIE11, pressing <enter> does not execute search (one has to
   unfocus the input field for the search to update).
* [eof]
